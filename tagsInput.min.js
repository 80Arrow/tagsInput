layui.define(["jquery","layer"],(function(t){"use strict";var e=layui.jquery,n=layui.layer,o={config:{},set:function(t){var n=this;return this.config=e.extend({},this.config,t),this},on:function(t,e){return layui.onevent.call(this,r,t,e)}},i=function(){var t=this,e;return{config:this.config}},r="tagsInput",a=function(t){var n=this;this.config=e.extend({},this.config,o.config,t),this.render()};a.prototype.config={close:!1},a.prototype.init=function(){var t=this,n,o=this.config,i=document.createElement("input"),r=o.elem,a,s;0==e("#Arrow80tagsInput").length&&e("body").append('<style id="Arrow80tagsInput" type="text/css">.tagsDiv em{font-style:normal}.tagsDiv{width:80%;padding:.5em;color:#777;border:1px solid #d5d5d5;background-color:#fff}.tagsDiv span{font-size:12px;font-weight:400;line-height:16px;position:relative;display:inline-block;height:16px;margin-right:3px;margin-bottom:3px;padding:4px 22px 5px 9px;cursor:pointer;transition:all .2s ease 0s;vertical-align:baseline;white-space:nowrap;color:#fff;background-color:#009688;text-shadow:1px 1px 1px rgba(0,0,0,.15)}.tagsDiv .close{font-size:12px;font-weight:700;line-height:20px;position:absolute;top:0;right:0;bottom:0;float:none;width:18px;padding:0;cursor:pointer;text-align:center;opacity:1;color:#fff;border:0 none;background:transparent none repeat scroll 0 0;text-shadow:none}.tagsDiv .close:hover{background:#ffb800}.tagsInput[type=text],.tagsInput[type=text]:focus{line-height:25px;display:inline;margin:0;padding:0 6px;border:0 none;outline:0 none;box-shadow:none}.albtn{line-height:30px;display:block;width:100px;height:30px;margin:0 auto;cursor:pointer;text-align:center;color:#fff;background:#ffb800}</style>');for(var l=0;l<r.length;l++)n="",(a=e(r[l])).val()&&(s=a.val().split(","),e.each(s,(function(t,e){n+='<span rel="#'+r[l].id+'"><em>'+e+'</em><button type="button" class="close">×</button></span>'}))),""!=n&&a.before(n),a.before('<input type="text" rel="#'+r[l].id+'" autocomplete="off" class="tagsInput"'+(a.attr("placeholder")?' placeholder="'+a.attr("placeholder")+'"':"")+" />").removeClass("tagsInput").removeAttr("placeholder").hide();this.events(),this.enter()},a.prototype.render=function(){var t=this,n=this.config;n.elem=e(n.elem)},a.prototype.enter=function(){var t=this,n="",o=t.config;o.elem.prevAll(".tagsInput").keypress((function(i){var r;if("13"==(i.keyCode?i.keyCode:i.which)){var a=e(this).val().trim(),s=e(this).attr("rel"),l=e(s),p=new Array;if(!a)return!1;l.val()&&(p=l.val().split(",")),-1==p.indexOf(a)&&(p.push(a),t.render(),n='<span rel="'+s+'"><em>'+a+'</em><button type="button" class="close">×</button></span>',e(this).before(n),l.val(p.toString())),o.done&&"function"==typeof o.done&&o.done(l,a),e(this).val("")}}))},a.prototype.events=function(){var t=this,n=this.config;e(".tagsDiv").on("click",".close",(function(){var t=e(this).parent("span"),o=e(t).find("em").text().toString(),i=e(e(t).attr("rel")),r=new Array;t.remove(),i.val()?((r=i.val().split(",")).splice(e.inArray(o,r),1),i.val(r.toString())):i.val(""),n.remove&&"function"==typeof n.remove&&n.remove(i,o)}))},o.render=function(t){var e=new a(t);return e.init(),i.call(e)},t("tagsInput",o)}));
