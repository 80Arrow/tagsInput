layui.define(["jquery","layer"],(function(e){"use strict";var t=layui.jquery,n=layui.layer,a,r,l={render:function(e){return r=e,l.init(e),this},init:function(e){if(!e.elem)return n.msg("参数 elem 不能为空",{icon:5}),!1;var r,i,o;a=t(e.elem);for(var s=0;s<a.length;s++)o="",(r=t(a[s])).val()&&(i=r.val().split(","),t.each(i,(function(e,t){o+='<span rel="#'+a[s].id+'"><em>'+t+'</em><button type="button" class="close">×</button></span>'}))),""!=o&&r.before(o),r.before('<input type="text" rel="#'+a[s].id+'" autocomplete="off" class="tagsInput"'+(r.attr("placeholder")?' placeholder="'+r.attr("placeholder")+'"':"")+" />").removeClass("tagsInput").removeAttr("placeholder").hide();l.event(),l.enter()},event:function(){t(".tagsDiv").on("click",".close",(function(){var e=t(this).parent("span"),n,a=t(e).find("em").text().toString(),l=t(t(e).attr("rel")),i=new Array;e.remove(),l.val()?((n=(i=l.val().split(",")).indexOf(a))>-1&&i.splice(n,1),l.val(i.toString())):l.val(""),r.remove&&"function"==typeof r.remove&&r.remove(l,a)}))},add:function(e,n){var l,i=new Array;if(e=e.trim(),n||(n=a),!e)return!1;n.val()&&(i=n.val().split(",")),-1==i.indexOf(e)&&(i.push(e),l='<span rel="#'+n[0].id+'"><em>'+e+'</em><button type="button" class="close">×</button></span>',t(n.prevAll(".tagsInput")[0]).before(l),n.val(i.toString())),r.done&&"function"==typeof r.done&&r.done(n,e)},enter:function(){a.prevAll(".tagsInput").keypress((function(e){var n;if("13"==(e.keyCode?e.keyCode:e.which)){var a=t(this).val(),r=t(this).attr("rel");l.add(a,t(r)),t(this).val("")}}))}};layui.link(layui.cache.base+"tagsInput/tagsInput.min.css"),e("tagsInput",l)}));
